<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½å­å®éªŒ</title>
    <style>

        body {
            font-family: "Times New Roman", "æ¥·ä½“", serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .reward-info {
            position: absolute;
            top: 12%;
            right: 20%;
            padding: 5px 10px;
            background-color: white;
            border: 0.1px solid #000;
            border-radius: 5px;
            width: 100px;
            font-size: 1.2em;
            text-align: center;
        }
        .reward-info div {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 5px 0;
        }
        .reward-info div span {
            margin-left: 5px;
        }
        .container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            padding: 10px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 80%;
        }
        .jar-contain {
            text-align: center;
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .jar {
            border-radius: 10px;
            padding: 20px;
            width: 150px;
            height: 150px;
            text-align: center;
            background-image: url('ç½å­.png');
            background-size: cover;
            background-position: center;
        }
       
        .ball-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-top: 65px;
        }
        .ball {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: grey;
            margin: 3px auto;
        }
        .red { background-color: red; }
        .blue { background-color: blue; }
        .round {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            color: #555;
        }
        .slider-container {
            width: 60%;
            margin-top: 0px;
            padding: 20px;
            display: none;
        }
        .slider-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            margin-left: -100px;
        }
        .slider-label {
            font-size: 1.1em;
            margin-right: -289px; 
            width: 500px;
            text-align: left;
        }
        .slider-input {
            flex: 1;
            margin-right: 10px;
            height: 8px;
        }
        .slider-value {
            width: 50px;
            padding: 5px;
            border: 1px solid #000;
            border-radius: 5px;
            text-align: center;
            font-size: 1.2em;
        }
        .slider-ticks {
            display: flex;
            justify-content: space-between;
            margin-top: -20px;
            font-size: 0.9em;
            color: #555;
            padding-left: 45px;
            padding-right: 5px;
        }
        .slider-ticks span {
            width: 200px;
            text-align: center;
        }
        button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 1.5em;
            cursor: pointer;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 5px;
            box-shadow: 0 4px #999;
        }
        .blank-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #555;
            z-index: 1000;
        }
        #roundInfo {
            font-size: 1.0em;
            line-height: 1.5;
            color: #333;
            margin: 20px 0;
            text-align: center;
        }
        .reward-result {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border: 1px solid #000;
            border-radius: 10px;
            z-index: 2000;
            max-width: 90%;
            width: 800px;
            text-align: center;
            display: none;
        }
        .jars-display {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin: 30px 0;
        }
        @media (max-width: 600px) {
            .container {
                flex-direction: column;
            }
            .jar-contain {
                width: 100%;
                margin: 10px 0;
            }
            .reward-info {
                width: 95%;
            }
        }
        /* ç»“æœå±•ç¤ºæ ·å¼ */
        .phase-container {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
        }
        .phase-title {
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .comparison-jars {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin: 20px 0;
        }
        .jar-group {
            text-align: center;
        }
        .jar-group h3 {
            margin: 10px 0;
            color: #34495e;
        }
        .highlight {
            color: #000;
            font-weight: bold;
        }
        /* æ»šåŠ¨å®¹å™¨æ ·å¼ */
        .reward-result {
            max-height: 80vh; /* é™åˆ¶å®¹å™¨é«˜åº¦ */
            overflow-y: auto; /* å¯ç”¨å‚ç›´æ»šåŠ¨ */
            padding: 20px;
            margin: 20px;
        }

        /* ä¹‹å‰çš„æ ·å¼ä¿æŒä¸å˜ */
        .quiz-container {
            display: none; /* åˆå§‹éšè—é—®å· */
            position: fixed;
            top: 0;
            left: 0;
            width: 97%;
            height: 90%;
            background: white;
            z-index: 9999;
            text-align: center;
            padding: 20px;
            overflow-y: auto;
            
        }
        .quiz-container h3 {
            margin-bottom: 20px;
        }
        .quiz-container form {
            max-width: 800px;
            margin: 0 auto;
            text-align: left;
            font-size: 1.5em;
        }
        .quiz-container p {
            margin: 15px 0;
        }
        .quiz-container input[type="radio"] {
            margin-right: 10px;
        }
        .quiz-container button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1.2em;
            cursor: pointer;
        }
       /* åŸºç¡€å®¹å™¨æ ·å¼ */
        div[class^="page"] {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

/* ä¿¡æ¯å¼ºè°ƒå— */
.info-block {
    background: #f8f9fa;
    border-left: 4px solid #395ca2;
    padding: 15px;
    margin: 15px 0;
}

/* å“åº”å¼å¸ƒå±€ */
@media (max-width: 768px) {
    .grid-container {
        grid-template-columns: 1fr;
    }
}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
</head>
<body>
    <!-- å®éªŒæŒ‡å¯¼è¯­ -->
    

   <div id="instruction" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; text-align: center; padding: 20px; overflow-y: auto;"> 
    <div id="page1">
        <h2>å®éªŒè¯´æ˜</h2>
        <div style="max-width:800px; margin:20px auto; text-align:left">
            <p style="font-size:1.2em; line-height:1.6">
                æ¬¢è¿å‚åŠ æœ¬æ¬¡å®éªŒï¼è¯·è®¤çœŸé˜…è¯»ä»¥ä¸‹æŒ‡å¯¼è¯­ï¼Œåç»­æ‚¨å°†å›ç­”ä¸€äº›ç›¸å…³é—®é¢˜ï¼Œå¦‚æœå›ç­”æ­£ç¡®åˆ™è¿›å…¥æ­£å¼å®éªŒï¼Œå¦‚æœå›ç­”é”™è¯¯éœ€è¦é‡æ–°é˜…è¯»æŒ‡å¯¼è¯­ã€‚
            </p>
        </div>
        <button onclick="showPage(2)">æˆ‘åŒæ„</button>
    </div>
    <div id="page2" style="display:none">
        <div style="max-width:800px; margin:20px auto; text-align:left">
            <p style="font-size:1.2em; line-height:1.6">
                å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸¤ä¸ªç½å­ï¼Œæ¯ä¸ªç½å­é‡Œè£…æœ‰åä¸ªçƒï¼Œè¿™äº›çƒçš„é¢œè‰²è¦ä¹ˆæ˜¯<span style='color:red'>çº¢è‰²</span>ï¼Œè¦ä¹ˆæ˜¯<span style='color:blue'>è“è‰²</span>ã€‚ä½†æ˜¯ï¼Œ<span style='color:#395ca2'><strong>ä¸¤ä¸ªç½å­ä¸­éƒ½æœ‰éƒ¨åˆ†çƒçš„é¢œè‰²æ˜¾ç¤ºä¸ºç°è‰²ï¼Œç°è‰²çš„çƒè¡¨ç¤ºçƒçš„é¢œè‰²æœªçŸ¥</strong>ã€‚
                <img src="intro_jar.png" style="width:55%;
                                                border:1px solid #ddd;
                                                display: block;  
                                                margin: 0 auto;
                                                margin-top: 20px"> 
            </p>
            
        </div>
        <button onclick="showPage(3)" >ä¸‹ä¸€é¡µ â–¶</button>
    </div>
    <div id="page3" style="display:none">
        <div style="max-width:800px; margin:20px auto; text-align:left">
            <p style="font-size:1.2em; line-height:1.6"> 
                æ‚¨å°†é€‰æ‹©ä¸€ä¸ªç½å­è¿›è¡Œæ¨¡æ‹ŸæŠ½çƒæ¸¸æˆï¼Œç³»ç»Ÿå°†ä»æ‰€é€‰ç½å­ä¸­çš„åä¸ªçƒé‡ŒæŠ½å–ä¸€ä¸ªã€‚æŠ½å‡ºçƒçš„é¢œè‰²å°†å†³å®šæ‚¨çš„æœ€ç»ˆæŠ¥é…¬ã€‚é¢å¯¹ä¸¤ä¸ªä¿¡æ¯ä¸åŒçš„ç½å­ï¼Œæ‚¨éœ€è¦æ ¹æ®ä¸ªäººåå¥½é€‰æ‹©ä¸€ä¸ªè¿›è¡ŒæŠ½çƒæ¸¸æˆã€‚<span style='color:#395ca2'><strong>å®éªŒçš„åŸºç¡€æŠ¥é…¬ä¸º5å…ƒï¼Œå¦‚æœæ‚¨æŠ½åˆ°çº¢çƒï¼Œå°†é¢å¤–è·å¾—2å…ƒï¼Œå…±è®¡è·å¾—7å…ƒæŠ¥é…¬ï¼›å¦‚æœæ‚¨æŠ½åˆ°è“çƒï¼Œå°†æŸå¤±2å…ƒï¼Œå…±è®¡è·å¾—3å…ƒæŠ¥é…¬ã€‚</strong></span>
            </p>
            <img src="intro_reward.png" style="width:75%;
                                                border:1px solid #ddd;
                                                display: block;  
                                                margin: 0 auto;
                                                margin-top: 20px"> 
        </div>
        <button onclick="showPage(2)">â—€ ä¸Šä¸€é¡µ</button>
        <button onclick="showPage(4)" style="margin-left:20px">ä¸‹ä¸€é¡µ â–¶</button>
    </div>
    
    <div id="page4" style="display:none">
        <div style="max-width:800px; margin:20px auto; text-align:left">
            <p style="font-size:1.2em; line-height:1.6"> 
                ä¸ºäº†äº†è§£æ‚¨åå¥½çš„å¼ºçƒˆç¨‹åº¦ï¼Œè¯·æ‚¨å¯¹100ä¸ªæ„æ„¿ç‚¹è¿›è¡Œåˆ†é…ã€‚å…·ä½“æ¥è¯´ï¼Œ<span style='color:#395ca2'><strong>åˆ†é…ç»™æŸä¸ªç½å­çš„æ„æ„¿ç‚¹è¶Šå¤šï¼Œä»£è¡¨æ‚¨è¶Šå€¾å‘äºé€‰æ‹©è¯¥ç½å­è¿›è¡ŒæŠ½çƒæ¸¸æˆã€‚</strong></span>ä¾‹å¦‚:<br>
                <li style="font-size:1.2em; line-height:1.6">å¦‚æœæ‚¨å°†0ä¸ªæ„æ„¿ç‚¹åˆ†é…ç»™ç½Aï¼Œè€Œå°†100ä¸ªæ„æ„¿ç‚¹åˆ†é…ç»™ç½Bï¼Œè¿™è¡¨ç¤ºæ‚¨å®Œå…¨å€¾å‘äºé€‰æ‹©ç½Bè¿›è¡ŒæŠ½çƒæ¸¸æˆï¼Œè€Œä¸è€ƒè™‘ç½Aã€‚<br>
                <li style="font-size:1.2em; line-height:1.6">å¦‚æœæ‚¨åˆ†é…ç»™ç½Aå’Œç½Bå„50ä¸ªæ„¿æ„ç‚¹ï¼Œåˆ™è¡¨ç¤ºæ‚¨å¯¹ä¸¤ä¸ªç½å­çš„åå¥½ç›¸åŒã€‚<br>
                <li style="font-size:1.2em; line-height:1.6">å¦‚æœæ‚¨å°†80ä¸ªæ„æ„¿ç‚¹åˆ†é…ç»™ç½Aï¼Œ20ä¸ªæ„æ„¿ç‚¹ç»™ç½Bï¼Œåˆ™è¡¨ç¤ºæ‚¨æ›´å€¾å‘äºé€‰æ‹©ç½Aã€‚
            </p>
        </div>
        <button onclick="showPage(3)">â—€ ä¸Šä¸€é¡µ</button>
        <button onclick="showPage(5)" style="margin-left:20px">ä¸‹ä¸€é¡µ â–¶</button>
    </div>
    
    <div id="page5" style="display:none">
        <div style="max-width:800px; margin:20px auto; text-align:left">
        <p style="font-size:1.2em; line-height:1.6"> 
            å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å®éªŒä¸­æ‚¨éœ€è¦æ‹–åŠ¨æ»‘å—æ¥åˆ†é…æ„æ„¿ç‚¹ï¼Œåœ¨æ‹–åŠ¨æ»‘å—çš„è¿‡ç¨‹ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°æ‚¨å…·ä½“åˆ†é…ç»™ç½Aå’Œç½Bçš„æ„æ„¿ç‚¹ã€‚å½“æ‚¨å®Œæˆæ„æ„¿ç‚¹åˆ†é…åï¼Œè¯·ç‚¹å‡»â€œç¡®è®¤åˆ†é…â€ã€‚
            <img src='intro_slider.png' style='width: 100%;margin-left:0%;margin-right:10%;margin-top:3%;margin-bottom:2%;border-style: ridge;'>
            ç¡®è®¤åï¼Œæ‚¨å°†ä¼šçœ‹åˆ°<span style='color:#395ca2'><strong>ä¸€å¯¹æ–°çš„ç½å­</strong></span>ï¼Œæ¸¸æˆè§„åˆ™ç›¸åŒï¼Œè¯·æ‚¨ç»§ç»­åˆ†é…æ„æ„¿ç‚¹ã€‚
            æœ¬å®éªŒä¸­ï¼Œæ‚¨éœ€è¦æŒ‰ç…§ä»¥ä¸Šè§„åˆ™å¯¹<span style='color:#395ca2'><strong>100å¯¹ç½å­</strong></span>åˆ†é…æ„æ„¿ç‚¹ã€‚
        </p>
            </div>
            

        <button onclick="showPage(4)">â—€ ä¸Šä¸€é¡µ</button>
        <button onclick="showPage(6)" style="margin-left:20px">ä¸‹ä¸€é¡µ â–¶</button>
       
    </div>

    <div id="page6" style="display:none">
        <div style="max-width:800px; margin:20px auto; text-align:left">
            <p style="font-size:1.2em; line-height:1.6"> 
                è¯·æ³¨æ„ï¼Œæ‚¨æ¯æ¬¡åˆ†é…æ„æ„¿ç‚¹çš„ç»“æœéƒ½å°†è¢«è®°å½•ã€‚å®éªŒå®Œæˆåï¼Œç³»ç»Ÿå°†åœ¨æ‚¨æ‰€æœ‰çš„æ„æ„¿ç‚¹åˆ†é…è®°å½•ï¼ˆå…±è®¡100æ¡ï¼‰ä¸­<span style='color:#395ca2'><strong>éšæœºæŠ½å–ä¸€æ¡</strong></span>ï¼Œå¹¶ä¾æ®æ‚¨çš„æ„æ„¿ç‚¹åˆ†é…é€‰æ‹©ç›¸åº”ç½å­è¿›è¡Œæ¨¡æ‹ŸæŠ½çƒæ¸¸æˆï¼Œ<span style='color:#395ca2'><strong>è¿™å°†å†³å®šæ‚¨å¯ä»¥è·å¾—çš„é¢å¤–å¥–åŠ±</strong></span>ã€‚<br><br>
                ä¾‹å¦‚ï¼šæ‚¨ç»™ç½Aåˆ†é…äº†25ä¸ªæ„æ„¿ç‚¹ï¼Œç»™ç½Båˆ†é…äº†75ä¸ªæ„æ„¿ç‚¹ï¼Œé‚£ä¹ˆç³»ç»Ÿé¦–å…ˆå°†å†³å®šä½¿ç”¨å“ªä¸ªç½å­æŠ½çƒï¼Œé€‰æ‹©ç½Açš„æ¦‚ç‡ä¸º25%ï¼Œé€‰æ‹©ç½Bçš„æ¦‚ç‡ä¸º75%ã€‚
                <span style='color:#395ca2'><strong>æ‚¨æœ€ç»ˆè·å¾—çš„æŠ¥é…¬ä¸æ‚¨çš„æ„æ„¿ç‚¹åˆ†é…ç»“æœæœ‰å…³ï¼Œæ‰€ä»¥è¯·æ‚¨åœ¨è®¤çœŸæ€è€ƒååšå†³å®šã€‚</strong></span><br><br>
                å¦‚æœæ‚¨å·²ç»ç†è§£è¯¥æ¸¸æˆï¼Œè¯·ç‚¹å‡»â€œå¼€å§‹ç­”é¢˜â€æŒ‰é’®ï¼Œå›ç­”é—®é¢˜ã€‚
            </p>
        </div>
            

        <button onclick="showPage(5)">â—€ ä¸Šä¸€é¡µ</button>
        <button onclick="showQuiz()" style="margin-left:20px">å¼€å§‹ç­”é¢˜</button>
    </div>
</div>


    <!-- é—®å·é¡µé¢ -->
    <div id="quiz" class="quiz-container">
        <h3>ç†è§£æµ‹è¯•</h3>
        <form id="quizForm">
            <!-- é—®é¢˜1 -->
            <p>1. åœ¨æ¨¡æ‹Ÿæ¸¸æˆä¸­ï¼Œæ‚¨ä¼šåŒæ—¶çœ‹åˆ°_____ä¸ªç½å­ã€‚</p>
            <input type="radio" name="q1" value="1"> 1<br>
            <input type="radio" name="q1" value="2"> 2<br>
            <input type="radio" name="q1" value="3"> 3<br>
            <input type="radio" name="q1" value="4"> 4<br>

            <!-- é—®é¢˜2 -->
            <p>2. ç½å­ä¸­çš„çƒå¯èƒ½æœ‰ä»¥ä¸‹å“ªä¸‰ç§é¢œè‰²ï¼Ÿ</p>
            <input type="radio" name="q2" value="1"> çº¢è‰² é»„è‰² ç»¿è‰²<br>
            <input type="radio" name="q2" value="2"> é»„è‰² ç»¿è‰² ç™½è‰²<br>
            <input type="radio" name="q2" value="3"> è“è‰² ç°è‰² é»„è‰²<br>
            <input type="radio" name="q2" value="4"> çº¢è‰² è“è‰² ç°è‰²<br>

            <!-- é—®é¢˜3 -->
            <p>3. æŠ½åˆ°çº¢è‰²çš„çƒèƒ½ä¼šè·å¾—é¢å¤–____ï¼ŒæŠ½åˆ°è“è‰²çš„çƒä¼šè·å¾—é¢å¤–____ã€‚</p>
            <input type="radio" name="q3" value="1"> æ”¶ç›Š æŸå¤±<br>
            <input type="radio" name="q3" value="2"> æŸå¤± æ”¶ç›Š<br>
            <input type="radio" name="q3" value="3"> æ”¶ç›Š æ”¶ç›Š<br>
            <input type="radio" name="q3" value="4"> æŸå¤± æŸå¤±<br>

            <!-- é—®é¢˜4 -->
            <p>4. åˆ†é…æ„æ„¿ç‚¹æ—¶ï¼Œä»¥ä¸‹è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼š</p>
            <input type="radio" name="q4" value="1"> ä¸¤ä¸ªç½å­é‡Œæ‰€æœ‰çƒçš„é¢œè‰²éƒ½æœªçŸ¥<br>
            <input type="radio" name="q4" value="2"> æœ‰ä¸€ä¸ªç½å­é‡Œæ‰€æœ‰çƒçš„é¢œè‰²å·²çŸ¥<br>
            <input type="radio" name="q4" value="3"> ä¸¤ä¸ªç½å­éƒ½æœ‰éƒ¨åˆ†çƒçš„é¢œè‰²æœªçŸ¥<br>
            <input type="radio" name="q4" value="4"> ä¸¤ä¸ªç½å­é‡Œæ‰€æœ‰çƒçš„é¢œè‰²éƒ½å·²çŸ¥<br>

            <!-- é—®é¢˜5 -->
            <p>5. å°æ˜åœ¨ä¸€ä¸ªè¯•æ¬¡ä¸­åˆ†é…ç»™Aç½90ä¸ªæ„æ„¿ç‚¹ï¼Œç»™Bç½10ä¸ªæ„æ„¿ç‚¹ï¼Œè¿™è¡¨ç¤ºï¼š</p>
            <input type="radio" name="q5" value="1"> å°æ˜å¼ºçƒˆåå¥½Aç½<br>
            <input type="radio" name="q5" value="2"> å°æ˜ç•¥å¾®åå¥½Aç½<br>
            <input type="radio" name="q5" value="3"> å°æ˜ç•¥å¾®åå¥½Bç½<br>
            <input type="radio" name="q5" value="4"> å°æ˜å¼ºçƒˆåå¥½Bç½<br>

            <!-- é—®é¢˜6 -->
            <p>6. å¦‚å›¾ï¼Œå¦‚æœæ ¹æ®è¯¥è®°å½•ç»“ç®—é¢å¤–æŠ¥é…¬ï¼ŒæŠ½åˆ°Aç½ç»“ç®—çš„æ¦‚ç‡ä¸º____ã€‚åœ¨æŠ½åˆ°Aç½çš„åŸºç¡€ä¸Šï¼Œé¢å¤–è·å¾—2å…ƒçš„æ¦‚ç‡ä¸º____ï¼š</p>
            <img src='question.png' style='width: 100%;margin-left:0%;margin-right:10%;margin-top:3%;margin-bottom:2%;border-style: ridge;'>
            <input type="radio" name="q6" value="1"> 90%, 20%<br>
            <input type="radio" name="q6" value="2"> 10%, 20%<br>
            <input type="radio" name="q6" value="3"> 90%, æ— æ³•ç¡®å®š<br>
            <input type="radio" name="q6" value="4"> 10%, æ— æ³•ç¡®å®š<br>


           
        </form>
        <button onclick="checkQuiz()">æäº¤ç­”æ¡ˆ</button>
    </div>

    <!-- å®éªŒå†…å®¹ -->
    <div class="reward-info">
        <div>
            <div style="width: 20px; height: 20px; background-color: red; border-radius: 50%;"></div>
            <span>=+2yuan</span>
        </div>
        <div>
            <div style="width: 20px; height: 20px; background-color: blue; border-radius: 50%;"></div>
            <span>=-2yuan</span>
        </div>
    </div>
    <div class="container">
        <div id="jarA"></div>
        <div id="jarB"></div>
    </div>
    <div class="round" id="roundInfo"></div>
    <div class="slider-container">
        <div class="slider-wrapper">
            <div class="slider-label">willingness points for Jar A</div>
            <input type="range" id="sliderA" class="slider-input" min="0" max="100" value="50" step="1">
            <div class="slider-value" id="sliderAValue">50</div>
        </div>
        <div class="slider-ticks">
            <span>0</span>
            <span>25</span>
            <span>50</span>
            <span>75</span>
            <span>100</span>
        </div>
        <div class="slider-wrapper">
            <div class="slider-label">willingness points for Jar B</div>
            <input type="range" id="sliderB" class="slider-input" min="0" max="100" value="50" step="1">
            <div class="slider-value" id="sliderBValue">50</div>
        </div>
        <div class="slider-ticks">
            <span>0</span>
            <span>25</span>
            <span>50</span>
            <span>75</span>
            <span>100</span>
        </div>
    </div>
    <div class="blank-screen" id="blankScreen"></div>
    <button id="startButton">Begin the Experiment</button>

    <!-- å¥–åŠ±ç»“æœå±•ç¤º -->
    <div id="rewardResult" class="reward-result" style="display: none;">
        <h2>ğŸ‰ Ball Draw Result ğŸ‰</h2>
        
        <div class="phase-container">
            <div class="phase-title">â–Round Draw</div>
            <p>Round <span id="selectedRoundText" class="highlight"></span> has been randomly selected by the system from all allocated trials. </p>
        </div>

        <div class="phase-container">
            <div class="phase-title">â–The state of the two jars at that moment</div>
            
            <div class="comparison-jars">
                <div class="jar-group">
                   
                    <div id="originalJarA"></div>
                </div>
                <div class="jar-group">
                    
                    <div id="originalJarB"></div>
                </div>
            </div>
            <p>Your willingness points were allocated as follows: JarA  <span id="originalJarAPercent" class="highlight"></span>  JarB  <span id="originalJarBPercent" class="highlight"></span>.</p>
        </div>

        <div class="phase-container">
            <div class="phase-title">â–The actual selection process</div>
            <p>Based on the allocation ratio of your willingness points, the system randomly selected <span id="selectedJarExplanation" class="highlight"></span>.</p>
            
            <div class="phase-container">
                <div class="phase-title">â–The actual state of the two jars</div>
               
                <div class="comparison-jars">
                    <div class="jar-group">
                        
                        <div id="resultJarA"></div>
                    </div>
                    <div class="jar-group">
                       
                        <div id="resultJarB"></div>
                    </div>
                </div>
            </div>

            <p>The color of the ball randomly drawn from <span id="selectedJarName" class="highlight"></span> by the system is <span id="ballColorExplanation" class="highlight"></span>,
            which means your reward will be <span id="rewardExplanation" class="highlight"></span> yuan.
            </p>
        </div>

        <button id="closeResult">End the Experiment</button>
    </div>

    <script>
        const jarA = document.getElementById('jarA');
        const jarB = document.getElementById('jarB');
        const totalRounds = 3;
        let currentRound = 0;
        let isSliderMoved = false;
        const experimentData = [];
        
        const sliderContainer = document.querySelector('.slider-container');
        const sliderA = document.getElementById('sliderA');
        const sliderB = document.getElementById('sliderB');
        const sliderAValue = document.getElementById('sliderAValue');
        const sliderBValue = document.getElementById('sliderBValue');
        const startButton = document.getElementById('startButton');
        const blankScreen = document.getElementById('blankScreen');
 

        sliderA.addEventListener('input', syncSliders);
        sliderB.addEventListener('input', syncSliders);
        startButton.addEventListener('click', startExperiment);

        function syncSliders() {
            const total = parseInt(sliderA.value) + parseInt(sliderB.value);
            if (total !== 100) {
                if (this === sliderA) {
                    sliderB.value = 100 - sliderA.value;
                } else {
                    sliderA.value = 100 - sliderB.value;
                }
            }
            sliderAValue.textContent = sliderA.value;
            sliderBValue.textContent = sliderB.value;
            isSliderMoved = true;
        }
            


        function showBlankScreen() {
            blankScreen.style.display = "flex";
            sliderContainer.style.display = "none";
            startButton.style.display = "none";

            setTimeout(() => {
                if (currentRound < totalRounds) {
                    blankScreen.style.display = "none";
                    sliderContainer.style.display = "block";
                    startButton.style.display = "block";
                    showJars();
                    isSliderMoved = false;
                } else {
                    calculateAndDisplayReward();
                }
            }, 500);
        }

        function showJars() {
            currentRound++;
            document.getElementById("roundInfo").textContent = "Please adjust the slider to allocate 100 willingness points between the 2 jars based on how willing you are to choose each one.";

            const ballsA = generateBallsA();
            const ballsB = generateBallsB(ballsA.greyCount);

            document.getElementById("jarA").innerHTML = generateJar('A', ballsA.balls, currentRound);
            document.getElementById("jarB").innerHTML = generateJar('B', ballsB.balls, currentRound);

            sliderA.value = 50;
            sliderB.value = 50;
            sliderAValue.textContent = 50;
            sliderBValue.textContent = 50;

            experimentData.push({
                round: currentRound,
                jarAValue: 50,
                jarBValue: 50,
                redCountA: ballsA.redCount,
                blueCountA: ballsA.blueCount,
                redCountB: ballsB.redCount,
                blueCountB: ballsB.blueCount
            });
        }

        function recordData() {
            experimentData[currentRound - 1].jarAValue = parseInt(sliderA.value);
            experimentData[currentRound - 1].jarBValue = parseInt(sliderB.value);
            if (currentRound === totalRounds) exportToExcel();
        }

        function exportToExcel() {
            const wsData = [
                ["è½®æ¬¡", "ç½Aæ„æ„¿ç‚¹", "ç½Bæ„æ„¿ç‚¹", "ç½Açº¢çƒæ•°", "ç½Aè“çƒæ•°", "ç½Bçº¢çƒæ•°", "ç½Bè“çƒæ•°"],
                ...experimentData.map(data => [
                    data.round,
                    data.jarAValue,
                    data.jarBValue,
                    data.redCountA,
                    data.blueCountA,
                    data.redCountB,
                    data.blueCountB
                ])
            ];
            const ws = XLSX.utils.aoa_to_sheet(wsData);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "å®éªŒæ•°æ®");
            XLSX.writeFile(wb, "å®éªŒæ•°æ®.xlsx");
        }

        function generateBallsA() {
            const greyCount = Math.floor(Math.random() * 4) + 5;
            const remaining = 10 - greyCount;
            let redCount = Math.floor(Math.random() * (remaining + 1));
            let blueCount = remaining - redCount;
            
            while(blueCount > redCount) {
                redCount = Math.floor(Math.random() * (remaining + 1));
                blueCount = remaining - redCount;
            }
            
            return {
                balls: [...Array(redCount).fill('red'), ...Array(blueCount).fill('blue'), ...Array(greyCount).fill('grey')],
                redCount,
                blueCount,
                greyCount
            };
        }

        function generateBallsB(maxGrey) {
            const greyCount = Math.floor(Math.random() * (maxGrey - 4)) + 4;
            const remaining = 10 - greyCount;
            let redCount = Math.floor(Math.random() * (remaining + 1));
            let blueCount = remaining - redCount;
            
            while(blueCount > redCount) {
                redCount = Math.floor(Math.random() * (remaining + 1));
                blueCount = remaining - redCount;
            }
            
            return {
                balls: [...Array(redCount).fill('red'), ...Array(blueCount).fill('blue'), ...Array(greyCount).fill('grey')],
                redCount,
                blueCount,
                greyCount
            };
        }

        function generateJar(jarType, balls) {
            return `
                <div class="jar-contain">
                    <div><strong>Jar${jarType}</strong></div>
                    <div class="jar">
                        <div class="ball-container">
                            ${balls.map(color => `<div class="ball ${color}"></div>`).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function calculateAndDisplayReward() {
            // éšè—å…¶ä»–ç•Œé¢å…ƒç´ 
            document.querySelector('.container').style.display = 'none';
            document.getElementById('roundInfo').style.display = 'none';
            sliderContainer.style.display = 'none';
            startButton.style.display = 'none';
            blankScreen.style.display = 'none';

            // éšæœºé€‰æ‹©è¯•æ¬¡
            const selectedTrial = experimentData[Math.floor(Math.random() * experimentData.length)];

            // ç”ŸæˆåŸå§‹ç½å­æ˜¾ç¤ºï¼ˆåˆ†é…æ—¶çš„çŠ¶æ€ï¼‰
            const originalBallsA = [
                ...Array(selectedTrial.redCountA).fill('red'),
                ...Array(selectedTrial.blueCountA).fill('blue'),
                ...Array(10 - selectedTrial.redCountA - selectedTrial.blueCountA).fill('grey')
            ];
            
            const originalBallsB = [
                ...Array(selectedTrial.redCountB).fill('red'),
                ...Array(selectedTrial.blueCountB).fill('blue'),
                ...Array(10 - selectedTrial.redCountB - selectedTrial.blueCountB).fill('grey')
            ];

            // æ˜¾ç¤ºåŸå§‹ç½å­
            document.getElementById('originalJarA').innerHTML = generateJar('A', originalBallsA);
            document.getElementById('originalJarB').innerHTML = generateJar('B', originalBallsB);

            // ç”Ÿæˆå®é™…æŠ½å–ç½å­ï¼ˆæ›¿æ¢ç°çƒï¼‰
           const actualBallsA = [
                ...Array(selectedTrial.redCountA).fill('red'),
                ...Array(selectedTrial.blueCountA).fill('blue'),
                ...Array(10 - selectedTrial.redCountA - selectedTrial.blueCountA)
                    .fill().map(() => Math.random() < 0.5 ? 'red' : 'blue')
            ]

            const actualBallsB = [
                ...Array(selectedTrial.redCountB).fill('red'),
                ...Array(selectedTrial.blueCountB).fill('blue'),
                ...Array(10 - selectedTrial.redCountB - selectedTrial.blueCountB)
                    .fill().map(() => Math.random() < 0.5 ? 'red' : 'blue')
            ]
            
            // æ˜¾ç¤ºå®é™…ç½å­
            document.getElementById('resultJarA').innerHTML = generateJar('A', actualBallsA);
            document.getElementById('resultJarB').innerHTML = generateJar('B', actualBallsB);

            // æ‰§è¡ŒæŠ½å–é€»è¾‘
            const total = selectedTrial.jarAValue + selectedTrial.jarBValue;
            const selectedJar = Math.random() * total < selectedTrial.jarAValue ? 'A' : 'B';
            const selectedBalls = selectedJar === 'A' ? actualBallsA : actualBallsB;
            const randomBall = selectedBalls[Math.floor(Math.random() * 10)];

            // å¡«å……æ‰€æœ‰æ–‡æœ¬ä¿¡æ¯
            document.getElementById('selectedRoundText').textContent = selectedTrial.round;
            document.getElementById('originalJarAPercent').textContent = selectedTrial.jarAValue;
            document.getElementById('originalJarBPercent').textContent = selectedTrial.jarBValue;
            document.getElementById('selectedJarExplanation').textContent = `Jar ${selectedJar}`;
            document.getElementById('selectedJarName').textContent = `Jar ${selectedJar}`;
            document.getElementById('ballColorExplanation').textContent = randomBall === 'red' ? 'red' : 'blue';
            document.getElementById('rewardExplanation').textContent = randomBall === 'red' ? '+2' : '-2';
            // è®¾ç½®çƒé¢œè‰²æ–‡å­—çš„é¢œè‰²
            const ballColorSpan = document.getElementById('ballColorExplanation');
            ballColorSpan.style.color = randomBall === 'red' ? 'red' : 'blue';
            // è®¾ç½®æŠ¥é…¬æ–‡å­—çš„é¢œè‰²
            const rewardSpan = document.getElementById('rewardExplanation');
            rewardSpan.style.color = randomBall === 'red' ? 'red' : 'blue';
            // æ˜¾ç¤ºç»“æœç•Œé¢
            document.getElementById('rewardResult').style.display = 'block';
        }

        document.getElementById('closeResult').addEventListener('click', () => {
            document.getElementById('rewardResult').style.display = 'none';
            showEndScreen();
        });

         // æ˜¾ç¤ºå®éªŒç»“æŸç•Œé¢
         function showEndScreen() {
            blankScreen.textContent = "Thank you for being part of this study! You can press the spacebar to exit now, or the system will close in 10 seconds.";
            blankScreen.style.display = "flex";

            // ç›‘å¬ç©ºæ ¼é”®æŒ‰ä¸‹äº‹ä»¶
            document.addEventListener("keydown", function(event) {
                if (event.code === "Space") {
                    window.close();
                }
            });

            // 10ç§’åè‡ªåŠ¨é€€å‡º
            setTimeout(() => {
                window.close();
            }, 10000);
        }

        // æŒ‡å¯¼è¯­é¡µé¢åˆ‡æ¢
        function showPage(pageNumber) {
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`page${i}`).style.display = 'none';
            }
            document.getElementById(`page${pageNumber}`).style.display = 'block';
        
        } 
        
        // æ˜¾ç¤ºé—®å·é¡µé¢
        function showQuiz() {
            document.getElementById('instruction').style.display = 'none'; // éšè—æŒ‡å¯¼è¯­
            document.getElementById('quiz').style.display = 'block'; // æ˜¾ç¤ºé—®å·
            resetQuiz(); // æ¸…ç©ºä¹‹å‰çš„ç­”æ¡ˆ
        }

        // æ¸…ç©ºé—®å·ç­”æ¡ˆ
        function resetQuiz() {
            const form = document.getElementById('quizForm');
            const inputs = form.querySelectorAll('input[type="radio"]');
            inputs.forEach(input => (input.checked = false)); // æ¸…ç©ºæ‰€æœ‰é€‰é¡¹
        }

        // æ£€æŸ¥é—®å·ç­”æ¡ˆ
        function checkQuiz() {
            const answers = [
                { name: 'q1', correct: '2' },
                { name: 'q2', correct: '4' },
                { name: 'q3', correct: '1' },
                { name: 'q4', correct: '3' },
                { name: 'q5', correct: '1' },
                { name: 'q6', correct: '3' },
            ];

            let allAnswered = true;
            let correctCount = 0;

            answers.forEach(answer => {
                const selected = document.querySelector(`input[name="${answer.name}"]:checked`);
                if (!selected) {
                    allAnswered = false;
                } else if (selected.value === answer.correct) {
                    correctCount++;
                }
            });

            if (!allAnswered) {
                alert("è¯·å›ç­”æ‰€æœ‰é—®é¢˜ï¼");
                return;
            }

            if (correctCount < answers.length) {
                alert(`æ‚¨çš„å›ç­”æœ‰ ${answers.length - correctCount} ä¸ªé”™è¯¯ï¼Œè¯·é‡æ–°é˜…è¯»æŒ‡å¯¼è¯­ï¼`);
                document.getElementById('instruction').style.display = 'block'; // æ˜¾ç¤ºæŒ‡å¯¼è¯­å®¹å™¨
                document.getElementById('quiz').style.display = 'none';        // éšè—é—®å·å®¹å™¨
                showPage(2); // è¿”å›ç¬¬ä¸€é¡µé‡æ–°é˜…è¯»æŒ‡å¯¼è¯­
                return;
            }

            // å¦‚æœæ‰€æœ‰ç­”æ¡ˆæ­£ç¡®ï¼Œæ˜¾ç¤ºæ­£ç¡®åé¦ˆ
            alert("å›ç­”æ­£ç¡®ï¼Œå®éªŒæ­£å¼å¼€å§‹ï¼");
            document.getElementById('quiz').style.display = 'none'; // éšè—é—®å·
            startExperiment(); // å¼€å§‹å®éªŒ
        }
        
        // å¼€å§‹å®éªŒ
        function startExperiment() {
            document.getElementById('instruction').style.display = 'none';
            // åˆå§‹åŒ–å®éªŒ
            if (currentRound === 0) {
                sliderContainer.style.display = "block";
                startButton.textContent = "Confirm Allocation";
                showJars();
                return;
            } else {

                // æ·»åŠ æ»‘åŠ¨éªŒè¯
             if (!isSliderMoved) {
                alert("Please allocate your willingness points!");
                return;
                }

                recordData();
                showBlankScreen();
            }
        }

    </script>
</body>
</html>